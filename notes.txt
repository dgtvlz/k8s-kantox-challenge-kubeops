setup minikube

create account on docker hub.

create access token https://docs.docker.com/security/for-developers/access-tokens/

set up secrets:  https://docs.github.com/en/actions/security-guides/using-secrets-in-github-actions#creating-secrets-for-a-repository
DOCKERHUB_USERNAME
DOCKERHUB_TOKEN


In the repo settings -> Actions -> General -> Workflow permissions -> Give it read and write permissions so that our action can commit changes to the repo.



argocd

install argocd cli

kubectl create namespace argocd
kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
kubectl get all -n argocd

minikube service argocd-server --url -n argocd

get password
kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d; echo

login into argo.
create stg app
copy argocd/app_stg.yaml
create
sync
create prd app
copy argocd/app_prd.yaml
create
sync


programatically: 
helm install argocd-app-stg -f values_stg.yaml .
helm install argocd-app-prd -f values_prd.yaml .


requirements
    minikube v1.32.0
        Kubernetes v1.28.3
        Docker 24.0.7
    helm v3.14.0